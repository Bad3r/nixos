## Version 25.11

---

**Table of Contents**

[Preface](#preface)

[Installation](#ch-installation)

[Obtaining NixOS](#sec-obtaining)

[Installing NixOS](#sec-installation)

[Changing the Configuration](#sec-changing-config)

[Upgrading NixOS](#sec-upgrading)

[Building a NixOS (Live) ISO](#sec-building-image)

[Building Images with `nixos-rebuild build-image`](#sec-image-nixos-rebuild-build-image)

[Building Images via `systemd-repart`](#sec-image-repart)

[Configuration](#ch-configuration)

[Configuration Syntax](#sec-configuration-syntax)

[Package Management](#sec-package-management)

[User Management](#sec-user-management)

[File Systems](#ch-file-systems)

[X Window System](#sec-x11)

[Wayland](#sec-wayland)

[GPU acceleration](#sec-gpu-accel)

[Xfce Desktop Environment](#sec-xfce)

[Networking](#sec-networking)

[Linux Kernel](#sec-kernel-config)

[Subversion](#module-services-subversion)

[GNOME Desktop](#chap-gnome)

[Pantheon Desktop](#chap-pantheon)

[External Bootloader Backends](#sec-bootloader-external)

[Clevis](#module-boot-clevis)

[Garage](#module-services-garage)

[YouTrack](#module-services-youtrack)

[Szurubooru](#module-services-szurubooru)

[Suwayomi-Server](#module-services-suwayomi-server)

[strfry](#module-services-strfry)

[Plausible](#module-services-plausible)

[Pingvin Share](#module-services-pingvin-share)

[Pi-hole Web Dashboard](#module-services-web-apps-pihole-web)

[Pict-rs](#module-services-pict-rs)

[OpenCloud](#module-services-opencloud)

[Nextcloud](#module-services-nextcloud)

[Matomo](#module-services-matomo)

[Lemmy](#module-services-lemmy)

[Keycloak](#module-services-keycloak)

[Jitsi Meet](#module-services-jitsi-meet)

[Honk](#module-services-honk)

[Hatsu](#module-services-hatsu)

[Grocy](#module-services-grocy)

[GoToSocial](#module-services-gotosocial)

[Glance](#module-services-glance)

[FileSender](#module-services-filesender)

[Discourse](#module-services-discourse)

[Davis](#module-services-davis)

[Castopod](#module-services-castopod)

[c2FmZQ](#module-services-c2fmzq)

[Akkoma](#module-services-akkoma)

[systemd-lock-handler](#module-services-systemd-lock-handler)

[kerberos_server](#module-services-kerberos-server)

[Meilisearch](#module-services-meilisearch)

[Yggdrasil](#module-services-networking-yggdrasil)

[uMurmur](#module-service-umurmur)

[Prosody](#module-services-prosody)

[Pleroma](#module-services-pleroma)

[pihole-FTL](#module-services-networking-pihole-ftl)

[Netbird server](#module-services-netbird-server)

[Netbird](#module-services-netbird)

[Mosquitto](#module-services-mosquitto)

[Jottacloud Command-line Tool](#module-services-jotta-cli)

[GNS3 Server](#module-services-gns3-server)

[Firefox Sync server](#module-services-firefox-syncserver)

[DNS-over-HTTPS Server](#module-service-doh-server)

[Dnsmasq](#module-services-networking-dnsmasq)

[ü¶Ä crab-hole](#module-services-crab-hole)

[atalkd](#module-services-atalkd)

[Anubis](#module-services-anubis)

[Samba](#module-services-samba)

[Litestream](#module-services-litestream)

[Prometheus exporters](#module-services-prometheus-exporters)

[parsedmarc](#module-services-parsedmarc)

[OCS Inventory Agent](#module-services-ocsinventory-agent)

[Goss](#module-services-goss)

[Cert Spotter](#module-services-certspotter)

[WeeChat](#module-services-weechat)

[Taskserver](#module-services-taskserver)

[Paisa](#module-services-paisa)

[GitLab](#module-services-gitlab)

[Forgejo](#module-forgejo)

[Dump1090-fa](#module-services-dump1090-fa)

[Apache Kafka](#module-services-apache-kafka)

[Anki Sync Server](#module-services-anki-sync-server)

[Matrix](#module-services-matrix)

[Mjolnir (Matrix Moderation Tool)](#module-services-mjolnir)

[Mautrix-Whatsapp](#module-services-mautrix-whatsapp)

[Mautrix-Signal](#module-services-mautrix-signal)

[Maubot](#module-services-maubot)

[Draupnir (Matrix Moderation Bot)](#module-services-draupnir)

[Mailman](#module-services-mailman)

[Trezor](#trezor)

[Customizing display configuration](#module-hardware-display)

[Emacs](#module-services-emacs)

[Livebook](#module-services-livebook)

[Blackfire profiler](#module-services-blackfire)

[Athens](#module-athens)

[Flatpak](#module-services-flatpak)

[TigerBeetle](#module-services-tigerbeetle)

[PostgreSQL](#module-postgresql)

[FoundationDB](#module-services-foundationdb)

[BorgBackup](#module-borgbase)

[SSL/TLS Certificates with ACME](#module-security-acme)

[Oh my ZSH](#module-programs-zsh-ohmyzsh)

[Plotinus](#module-program-plotinus)

[Digital Bitbox](#module-programs-digitalbitbox)

[Input Methods](#module-services-input-methods)

[Profiles](#ch-profiles)

[Mattermost](#sec-mattermost)

[Kubernetes](#sec-kubernetes)

[Administration](#ch-running)

[Service Management](#sec-systemctl)

[Rebooting and Shutting Down](#sec-rebooting)

[User Sessions](#sec-user-sessions)

[Control Groups](#sec-cgroups)

[Logging](#sec-logging)

[Necessary system state](#ch-system-state)

[Cleaning the Nix Store](#sec-nix-gc)

[Container Management](#ch-containers)

[Troubleshooting](#ch-troubleshooting)

[Development](#ch-development)

[Getting the Sources](#sec-getting-sources)

[Writing NixOS Modules](#sec-writing-modules)

[Building Specific Parts of NixOS](#sec-building-parts)

[Bootspec](#sec-bootspec)

[What happens during a system switch?](#sec-switching-systems)

[Writing NixOS Documentation](#sec-writing-documentation)

[NixOS Tests](#sec-nixos-tests)

[Developing the NixOS Test Driver](#chap-developing-the-test-driver)

[Testing the Installer](#ch-testing-installer)

[Modular Services](#modular-services)

[Contributing to this manual](#chap-contributing)

[A. Configuration Options](options.html)

[B. Release Notes](release-notes.html)

**List of Examples**

1\. [Example partition schemes for NixOS on `/dev/sda` (MBR)](#ex-partition-scheme-MBR)

2\. [Example partition schemes for NixOS on `/dev/sda` (UEFI)](#ex-partition-scheme-UEFI)

3\. [Commands for Installing NixOS on `/dev/sda`](#ex-install-sequence)

4\. [Example: NixOS Configuration](#ex-config)

5\. [Customize specific image variants](#ex-nixos-rebuild-build-image-customize)

6\. [Nix expression to build Emacs with packages (`emacs.nix`)](#ex-emacsNix)

7\. [Querying Emacs packages](#module-services-emacs-querying-packages)

8\. [Custom Emacs in `configuration.nix`](#module-services-emacs-configuration-nix)

9\. [Custom Emacs in `~/.config/nixpkgs/config.nix`](#module-services-emacs-config-nix)

10\. [Custom Emacs build](#ex-emacsGtk3Nix)

11\. [Structure of NixOS Modules](#ex-module-syntax)

12\. [NixOS Module for the ‚Äúlocate‚Äù Service](#locate-example)

13\. [Escaping in Exec directives](#exec-escaping-example)

14\. [`mkEnableOption` usage](#ex-options-declarations-util-mkEnableOption-magic)

15\. [Simple `mkPackageOption` usage](#ex-options-declarations-util-mkPackageOption-hello)

16\. [`mkPackageOption` with explicit default and example](#ex-options-declarations-util-mkPackageOption-ghc)

17\. [`mkPackageOption` with additional description text](#ex-options-declarations-util-mkPackageOption-extraDescription)

18\. [Extensible type placeholder in the service module](#ex-option-declaration-eot-service)

19\. [Extending `services.xserver.displayManager.enable` in the `gdm` module](#ex-option-declaration-eot-backend-gdm)

20\. [Extending `services.xserver.displayManager.enable` in the `sddm` module](#ex-option-declaration-eot-backend-sddm)

21\. [`types.anything`](#ex-types-anything)

22\. [Directly defined submodule](#ex-submodule-direct)

23\. [Submodule defined as a reference](#ex-submodule-reference)

24\. [Declaration of a list of submodules](#ex-submodule-listof-declaration)

25\. [Definition of a list of submodules](#ex-submodule-listof-definition)

26\. [Declaration of attribute sets of submodules](#ex-submodule-attrsof-declaration)

27\. [Definition of attribute sets of submodules](#ex-submodule-attrsof-definition)

28\. [Adding a type check](#ex-extending-type-check-1)

29\. [Overriding a type check](#ex-extending-type-check-2)

30\. [Freeform submodule](#ex-freeform-module)

31\. [Module with conventional `settings` option](#ex-settings-nix-representable)

32\. [Declaring a type-checked `settings` attribute](#ex-settings-typed-attrs)

33\. [Using extendNixOS in `passthru.tests` to make `(openssh.tests.overrideAttrs f).tests.nixos` coherent](#ex-nixos-test-extendNixOS)

# Preface

This manual describes how to install, use and extend NixOS, a Linux distribution based on the purely functional package management system [Nix](https://nixos.org/nix), that is composed using modules and packages defined in the [Nixpkgs](https://nixos.org/nixpkgs) project.

Additional information regarding the Nix package manager and the Nixpkgs project can be found in respectively the [Nix manual](https://nixos.org/nix/manual) and the [Nixpkgs manual](https://nixos.org/nixpkgs/manual).

If you encounter problems, please report them on the [`Discourse`](https://discourse.nixos.org), the [Matrix room](https://matrix.to/#/%23nix:nixos.org), or on the [`#nixos` channel on Libera.Chat](irc://irc.libera.chat/#nixos). Alternatively, consider [contributing to this manual](#chap-contributing "Contributing to this manual"). Bugs should be reported in [NixOS‚Äô GitHub issue tracker](https://github.com/NixOS/nixpkgs/issues).

### Note

Commands prefixed with `#` have to be run as root, either requiring to login as root user or temporarily switching to it using `sudo` for example.

# Installation

This section describes how to obtain, install, and configure NixOS for first-time use.

**Table of Contents**

[Obtaining NixOS](#sec-obtaining)

[Installing NixOS](#sec-installation)

[Changing the Configuration](#sec-changing-config)

[Upgrading NixOS](#sec-upgrading)

[Building a NixOS (Live) ISO](#sec-building-image)

[Building Images with `nixos-rebuild build-image`](#sec-image-nixos-rebuild-build-image)

[Building Images via `systemd-repart`](#sec-image-repart)
